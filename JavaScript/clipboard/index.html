<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<title>clipBoard</title>
	</head>
	<body>
		<!--support paste element-->
		<div contenteditable="true" style="display: none;"></div>
		<h2>Image:</h2>
		<img id="previewImg" src="default.png" alt="image"/>
	</body>
	<script>
		document.addEventListener("paste", function(e) {
			//items代表了粘贴数据的list
			var items = (e.clipboardData || window.clipboardData).items;
			//clipboardData.getData("text") 获取文本数据
			if (!items || !items.length) {return;}

			//获取粘贴的图片
			var imageFile = null;
			for (var index = 0; index < items.length; index++) {
				if (items[index].type.indexOf("image") !== -1) {
					//返回File对象
					imageFile = items[index].getAsFile();
					break;
				}
			}
			previewImage(imageFile);

		});

		//preview image
		function previewImage(file) {
			if (!file) {return;}
			var reader = new FileReader();
			reader.onload = function(event) {
				document.getElementById("previewImg").src = event.target.result;
			};
			//读取指定文件的内容，读取成功后,文件的内容将以URL字符串格式保存在reader.result的data中
			reader.readAsDataURL(file);
		}
	</script>
</html>
