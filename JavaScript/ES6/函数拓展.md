## 函数拓展

### 指定参数默认值

ES6支持给函数的参数指定默认值。没有参数或者显示传入undefined会触发该参数等于默认值，null则没有这种效果。

```javascript
function add(x = 0, y = 0) {
  return a + b
}
```

优点：

1. 代码简洁，省去判断和赋值操作。
2. 方便阅读，哪些参数可省略一目了然。

**注意**

1. 不允许重名参数(与参数作用域有关)。

   ```javascript
   function add(a, a, b) {
     return a + a + b
   }
   add(1, 2, 3) //7
   function add1(a = 0, a = 0, b = 0) {
     return a + a + b
   } //error
   ```

2. 参数的默认值若是变量或表达式，惰性求值。

   ```javascript
   let initData = 1
   function add(a = 0, b = initData) {
     return a + b
   }
   initData++;
   add(2) //4
   ```

#### length属性

返回(第一个指定默认值的参数之前的)未指定默认值的参数个数，用于统计预期传入的参数个数。

```javascript
(function(a = 0, b) {}).length //0
(function(a, b = 0) {}).length //1
(function(a, b) {}).length //2
(function(...args) {}).length //0
```

#### 参数解构赋值

等号左边是匹配模式，等号右边是默认值。

```javascript
function whoIs({userName:name = "none", age} = {}) {
  console.log(`${name}-${age}`)
}
whoIs({age: 12}) //none-12
whoIs() //none-undefined
whoIs({userName: "Tom", age: 12}) //Tom-12
```

#### 参数的作用域

一旦设置了参数的默认值，在函数进行初始化声明的时候，参数会形成一个独立的作用域，相当于在参数作用域中按顺序给参数进行声明并且赋值。

1. 若默认值中的变量与参数作用域中的参数同名
   * 该参数已声明并且赋值，默认值来自该参数
   * 该参数未声明，报错
2. 若默认值中的变量与参数作用域中的参数不同名，沿着作用域链查找变量

```javascript
var a = 10
var x = 14
function add(a, b = x, c = a) {
  return a + b + c;
}
add(12) //38
/*
{
  let a = 12
	let b = x //14
  let c = a //12
}
*/
function add(a = a, b = 12) {
  return a + b
}
add() //ReferenceError: a is not defined
/*
{
	let a = a //ReferenceError: a is not defined
	let b = 12
}
*/
```

在函数内，可以声明与参数重名的变量，因为函数内的变量与参数不在同一个作用域内，所以不是一个变量。

### rest参数(...)

`...变量名`，用于获取多余的参数，返回的变量是一个参数数组，用来取代arguments对象。

